CREATE TABLE IPAddresses (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  address VARCHAR NOT NULL
);

CREATE TABLE Papers (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  filename VARCHAR NOT NULL
);

CREATE TABLE Occurrences (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  created DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  paper_id INTEGER NOT NULL,
  species_id INTEGER NOT NULL,
  div_number INTEGER,
  FOREIGN KEY (paper_id) REFERENCES Papers (id)
);

CREATE TABLE Habitats (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  name VARCHAR NOT NULL
);

CREATE TABLE Locations (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  external_id INTEGER NOT NULL
);

CREATE TABLE Species (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  taxon_id VARCHAR NOT NULL,
  name VARCHAR
);

CREATE TABLE OccurrenceEntity (
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  created DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  occurrence_id INTEGER NOT NULL,
  ip_addr_id INTEGER NOT NULL,
  location_id INTEGER,
  habitat_id INTEGER,
  species_id INTEGER,
  rejected BOOLEAN DEFAULT 0,
  FOREIGN KEY (occurrence_id) REFERENCES Occurrences (id),
  FOREIGN KEY (ip_addr_id) REFERENCES IPAddresses (id),
  FOREIGN KEY (location_id) REFERENCES Locations (id),
  FOREIGN KEY (habitat_id) REFERENCES Habitats (id),
  FOREIGN KEY (species_id) REFERENCES Species (id)
);
